<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-request.html">


<link rel="import" href="shared-styles.html">

<link rel="import" href="kal-game-item.html">


<dom-module id="kal-home-page">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
        height: 100vh;
        overflow-y: scroll !important;
        
        font-size: calc(0.6em + (1.3125 - 1) * ((100vw - 20em) / (80 - 20)));
        line-height: calc(1em + (1.8 - 1.4) * ((100vw - 20em) / (80 - 20)));

      }

    

      #home-page{
        @apply(--layout-horizontal);
      }

      .content-container{
        width:100%;
        @apply(--layout-vertical);
      }

      .content-container .top-content{
        @apply(--layout-horizontal);
      }

      .content-container .bottom-content{
        @apply(--layout-vertical);
      }
      

      .content-container .top-content .left-content{
        width: 66.66666666666666666666%;
        @apply(--layout-vertical);
      }
      .content-container .top-content .right-content{
        width: 33.33333333333333333333%;
        @apply(--layout-vertical);
      }

     

      .img-container{
        position: relative;
        opacity: .7;
        transition: all ease-in-out .2s;
      }
      .img-container:hover{
        opacity: 1;
      }


      figure{
        margin: 10px; 
        box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);
      }

      figcaption{
        margin-left: 10px;
        margin-bottom: 10px;
        color: #fff;
        padding-right: 20px;
      }
      
      iron-image{
        max-width: 100%;
        width: 100%;
        /* height: 12.5em; */
      }


      #items .item{
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
        /* padding: 20px; */
        background-color: white;
        border: 1px solid #ddd;
        cursor: pointer;
        margin-bottom: 10px;
        color: #000 !important;
      }
      .item .item-column{
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }
      .item iron-image{
        height: 106px;
        width: 190px;
        box-sizing: border-box;
        background-color: #DDD;
      }
      .item .pad{
        padding: 0 16px;
        -ms-flex: 1 1 .000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: .000000001px;
        flex-basis: .000000001px;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      }
      .item .primary{
        /* font-size: 16px; */
        font-weight: bold;
      }
      .item .shortText{
        /* font-size: 14px; */
      }
      .continue-item{
        padding-top: 5px;
        width: 100%;
      }
      .continue-item paper-button{
        width: inherit;
        font-size: 12px;
      }
      

      /* Desktops and laptops ----------- */
      @media only screen  and (min-width : 1224px) {
        .content-container .top-content .left-content figure .img-container iron-image{
          height: 21rem;
        }
        .content-container .top-content .right-content figure .img-container iron-image{
          height: 6.9rem;
        }

        .content-container .top-content .right-content figure figcaption{
          @apply(--layout-vertical);
          @apply(--layout-center-center);
          height: 50px;
          font-size: 14px;
          line-height: 20px;
        }

        #items .item{
          padding: 10px;
          line-height: 15px;
        }
        .item iron-image{
          width: 130px;
          height: 80px;
          box-sizing: border-box;
          background-color: #DDD;
        }

        .item .pad .primary{
          font-size: 12px;
        }
        .item .pad .shortText{
          font-size: 10px;
        }
      }
      
      /* Desktops and laptops ----------- */
      @media only screen  and (min-width : 1366px) {
        .content-container .left-content figure .img-container iron-image{
          height: 26rem;
        }
        .content-container .right-content figure .img-container iron-image{
          height: 11rem;
        }
      }

        /* Desktops and laptops ----------- */
        @media only screen  and (min-width : 1620px) {
        .content-container .top-content .left-content figure .img-container iron-image{
          height: 23rem;
        }
        .content-container .top-content .right-content figure .img-container iron-image{
          height: 8rem;
        }

        .item iron-image{
          width: 170px;
          height: 92px;
          box-sizing: border-box;
          background-color: #DDD;
        }
        .item .pad .primary{
          font-size: 16px;
        }
        .item .pad .shortText{
          font-size: 14px;
        }
      }

      /* Large screens ----------- */
      @media only screen  and (min-width : 1824px) {
        .content-container .left-content figure .img-container iron-image{
          height: 23rem;
        }
        .content-container .right-content figure .img-container iron-image{
          height: 8rem;
        }
      }

      .content-container{
        @apply(--layout-flex-8);
      }
      .other-container{
        @apply(--layout-flex-4);
      }

      /* GAMELIST */
      #gamelist{
        @apply(--layout-horizontal);
        @apply(--layout-center-center);

        margin: 10px 0px;
        flex-flow: row wrap;
        width: 100%;
        height: auto;        
      
      }





    </style>
<!-- 
    <iron-ajax
      id="ajax"
      url="http://localhost:8081/data.json"
      handle-as="json"
      on-response="_handleNewsResponse"
      loading="{{loading}}"
      debounce-duration="300"></iron-ajax> -->

    <div id="home-page">
        <paper-material elevation="4" class="content-container">
          <div class="top-content">
              <div class="left-content">
                  <figure>
                    <a href="news/[[news.first.url]]">
                      <div class="img-container">
                          <iron-image src="[[cdn]][[news.first.picture]]" preload sizing="cover"></iron-image>
                      </div>
                    </a>
                    <figcaption>[[news.first.title]]</figcaption>
                  </figure>
              </div>
              <div class="right-content">
                    <template is="dom-repeat" items={{news.center}} 
                      as=item>
                      <figure>
                        <a href="[[item.url]]">
                          <div class="img-container">
                              <iron-image src="[[cdn]][[item.picture]]" preload sizing="cover"></iron-image>
                            </div>
                        </a>             
                        <figcaption>[[item.title]]</figcaption>
                      </figure>
                    </template>
              </div>
          </div>
          <div class="bottom-content">
          fsafaf
          </div>
          
        </paper-material>
        
        <paper-material elevation="1" class="other-container">
            <div id="items">
              <template is="dom-repeat" items={{news.right}} 
                as=item >
                <div class="item">
                    <div class="item-column">
                        <iron-image src="[[cdn]][[item.picture]]" preload sizing="cover"></iron-image>
                        <div class="pad">
                        <div class="primary">
                            [[item.title]]
                        </div>
                        <div class="shortText">
                            [[item.subtitle]]
                        </div>
                      </div>
                    </div>
                  </div>
              </template>
              </div>
              <div class="continue-item">
                <paper-button raised>DevamÄ±</paper-button>
              </div>
        </paper-material>
    </div>

    

    <!-- Oyunlar -->

    <div id="game-list">
      <template is="dom-repeat" items="{{gamelist}}">
          <kal-game-item game="[[item]]"></kal-game-item>
      </template>
      <!-- <a class="game" onclick="load();" itemprop="url" href="/oyun/okami-hd">
        <iron-image sizing="cover" preload fade src="//cdn.kaldirirmi.com/images/games/okami-logo.jpg"></iron-image>
        <div class="game-title"><span>Okami HD</span></div>
      </a> -->
      
    </div>




    <div style="height:1000px;"></div>

    
  </template>

  <script>
    class KalHomePage extends Polymer.Element {
      static get is() { return 'kal-home-page'; }

      /**
        * Object describing property-related metadata used by Polymer features
        */
      static get properties() {
        return {
          cdn : {
            type: String,
            value: 'https://cdn.kaldirirmi.com/images/news/',
          },
          loading: {
            type: Boolean,
            notify: true
          },
          content: {
            type: Array,
            value: [],
            notify: true
          },
          news: {
            type: Object,
            value: function(){
              return {
                first: null,
                center: [],
                right: []
              }
            }
          },
          gamelist: {
            type: Array,
            value: [],
            notify: true
          }
        };
      }


      /**
        * Called every time the element is inserted into the DOM. Useful for 
        * running setup code, such as fetching resources or rendering.
        * Generally, you should try to delay work until this time.
        */
      connectedCallback() {
        super.connectedCallback();
      
        const news = [
              {  
                  "id":1000094,
                  "title":"YÃ¼kselme Ligi 2017 Yaz Mevsimi MaÃ§larÄ± Sona Erdi",
                  "url":"yukselme-ligi-2017-yaz-mevsimi-maclari-sona-erdi",
                  "picture":"yukselme-ligi-final.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":126,
                  "subtitle":"SÃ¼rpriz sonuÃ§lar geldi, Galatasaray elindeki fÄ±rsatÄ± deÄerlendiremedi.",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000093,
                  "title":"Playerunknownâs Battlegroundsâun HaftalÄ±k GÃ¼ncellemesi YayÄ±nlanacak",
                  "url":"playerunknownâs-battlegroundsâun-haftalik-guncellemesi-yayinlanacak",
                  "picture":"pubg-16-hafta-update.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":148,
                  "subtitle":"16.hafta gÃ¼ncellemesinde birÃ§ok sorun dÃ¼zeltiliyor",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000092,
                  "title":"Steamâde KÃ¶klÃ¼ DeÄiÅiklikler Bizi Bekliyor",
                  "url":"steamâde-koklu-degisiklikler-bizi-bekliyor",
                  "picture":"steam-logo.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":114,
                  "subtitle":"Ä°Åte deÄiÅikliklerâ¦",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000091,
                  "title":"Playerunknownâs Battlegroundsâun Tam SÃ¼rÃ¼mÃ¼ Ertelendi",
                  "url":"playerunknownâs-battlegroundsâun-tam-surumu-ertelendi",
                  "picture":"pubg-haber.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":132,
                  "subtitle":"Tam sÃ¼rÃ¼me 2017 yÄ±lÄ±nÄ±n sonunda geÃ§ilmesi planlanÄ±yor!",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000090,
                  "title":"Assassinâs Creed Origins ne kadar bÃ¼yÃ¼k olacak?",
                  "url":"assassinâs-creed-origins-ne-kadar-buyuk-olacak-",
                  "picture":"assassisns-creed-origins-haber.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":117,
                  "subtitle":"YÃ¶netmeni Ashraf Ismail rÃ¶portajÄ±nda aÃ§Ä±kladÄ±",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000089,
                  "title":"LOL Evinde",
                  "url":"lol-evinde",
                  "picture":"server-relocation-final-merged-fullsize.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":136,
                  "subtitle":"Åimdi Faker DÃ¼ÅÃ¼nsÃ¼n !",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000042,
                  "title":"Mass Effect Andromeda Korsana Yenik DÃ¼ÅtÃ¼",
                  "url":"mass-effect-andromeda-korsana-yenik-dustu",
                  "picture":"masseffectandromeda.jpg",
                  "details":"\u003cp style=\"background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;\"\u003eElectronic\r\nArts\u0026nbsp;ve\u0026nbsp;Bioware\u0026nbsp;iÅbirliÄi ile geliÅtirilen\u0026nbsp;Mass Effect\r\nAndromeda\u0026nbsp;yaklaÅÄ±k 2 hafta Ã¶nce, PC, Playstation 4 ve Xbox Oneâda eÅ\r\nzamanlÄ± olarak satÄ±Åa sunuldu. Hikaye tabanlÄ± bir oyun olan Mass Efffect\r\nAndromeda, maalesef PC platformunda pek de parlak bir grafik Ã§izemedi. PC\r\noyuncularÄ±nÄ±n genel itibariyle, hikaye tabanlÄ± oyunlarÄ± korsan olarak oynamayÄ±\r\ntercih etmesi, en bÃ¼yÃ¼k neden olarak gÃ¶sterilebilir.Bioware,\u0026nbsp;Mass Effect\r\nAndromedaâda\u0026nbsp;Denuvo\u0026nbsp;isimli DRM koruma sistemini kullanÄ±yordu. Bu\r\nsistem Resident Evil 7âde de kullanÄ±lmÄ±Å ve onda da oyuncular 1 haftadan kÄ±sa\r\nbir sÃ¼rede kÄ±rmayÄ± becermiÅlerdi. Kendilerinin baÅÄ±na da aynÄ± Åeyin gelmesinden\r\nkorkan geliÅtiriciler pek de haksÄ±z Ã§Ä±kmadÄ±.Mass Effect Andromeda\u0026nbsp;da bu\r\nduruma yalnÄ±zca 13 gÃ¼n dayanabildi. YapÄ±mcÄ±, Denuvo kalkanlarÄ±nÄ±n devre dÄ±ÅÄ±\r\nbÄ±rakÄ±ldÄ±ÄÄ±nÄ± ve Mass Effect AndromedaânÄ±n âcrackâ dosyasÄ±nÄ±n bÃ¼yÃ¼k bir\r\nbÃ¶lÃ¼mÃ¼nÃ¼n tamamlandÄ±ÄÄ±nÄ± aÃ§Ä±kladÄ±.Ä°Åin aslÄ±na bakarsak, korsanlarÄ± etkisiz\r\nbÄ±rakmanÄ±n yolu, oyunu kÄ±ran topluluklara bir nevi rÃ¼Åvet vermekten geÃ§iyor. Bu\r\nyolun yadsÄ±namaz bir gerÃ§ek olduÄunu kabul eden EA daha Ã¶nceleri FIFA serisinde\r\nkorsanlarla anlaÅmÄ±Å ve oyunun kÄ±rÄ±lmasÄ±nÄ± uzun zaman boyunca engellemiÅti.\r\nBunu sÃ¶ylemek her ne kadar Ã¼zÃ¼cÃ¼ olsa da, maalesef bu tip korsan gruplara\r\nharaÃ§larÄ±nÄ± vermeden, oyunlarÄ± koruma altÄ±na almak mÃ¼mkÃ¼n deÄil.\u003cfont face=\"Arial, sans-serif\"\u003e\u003cspan style=\"background-color: rgb(34, 34, 34);\"\u003e\u003co:p\u003e\u003c/o:p\u003e\u003c/span\u003e\u003c/font\u003e\u003c/p\u003e",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":116,
                  "subtitle":"Korsanlar karÅÄ±sÄ±nda yapÄ±mcÄ±larÄ±n eli kolu baÄlÄ±!",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000040,
                  "title":"Saran Medya ve Riot Games TÃ¼rkiye\u0027den Dev Ä°ÅbirliÄi",
                  "url":"saran-medya-ve-riot-games-turkiye-den-dev-isbirligi",
                  "picture":"league-of-legends.jpg",
                  "details":"\u003cp\u003eRiot Games TÃ¼rkiye ile spor yayÄ±ncÄ±lÄ±ÄÄ± pazarlamasÄ±nda dÃ¼nya Åirketleri sÄ±ralamasÄ±nda 5. olan ve yeni spor kanalÄ± \"S Sport\" ile yayÄ±n hayatÄ±na da merhaba diyen \u0026nbsp;Saran Medya, League of Legends TÃ¼rkiye Åampiyonluk Ligiânin televizyon yayÄ±nlarÄ± ile ilgili bir anlaÅma imzaladÄ±lar.YapÄ±lan anlaÅmayla, TÃ¼rkiye\u0027nin Premier spor kanalÄ± S Sport, TÃ¼rkiyeânin ilk profesyonel Espor Ligi League of Legends TÃ¼rkiye Åampiyonluk Ligiânin yayÄ±n haklarÄ±nÄ± satÄ±n aldÄ±. S Sport\u0027un ayrÄ±ca 2017 yÄ±lÄ± iÃ§inde Ãin\u0027de dÃ¼zenlenecek League of Legends DÃ¼nya ÅampiyonasÄ±\u0027nÄ±n da \u0026nbsp;Espor tutkunlarÄ±yla buluÅturulacaÄÄ± bildirildi.Saran Medya ve Riot Games TÃ¼rkiye arasÄ±nda yapÄ±lan iÅ birliÄi \u0026nbsp;sadece maÃ§larÄ±n yayÄ±nlanmasÄ±yla sÄ±nÄ±rlÄ± kalmayacak, ayrÄ±ca \u0026nbsp;haftalÄ±k karÅÄ±laÅmalarda yaÅanan en Ã¶nemli anlar ve Ã¶zetler de S Sport ekranlarÄ±nda hayranlarÄ±yla buluÅacak. BunlarÄ±n yanÄ±nda League of Legends tÃ¼m lig karÅÄ±laÅmalarÄ±yla ilgili yorumlarÄ±n yapÄ±lacaÄÄ±, izleyicilerin en gÃ¼ncel geliÅmeleri takip edilebileceÄi Ã¶zel stÃ¼dyo programlarÄ± da yayÄ±nlanacak.\u003c/p\u003e\u003cp\u003e",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":109,
                  "subtitle":"League of Legends artÄ±k Televizyonda",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              }

        ];

        let index = 0;
        news.forEach(element => {
          if(index == 0){
            this.set('news.first', element);
          }
          else if(index >= 1 && index <= 2 ){
            this.push('news.center', element);
          }
          else{
            this.push('news.right', element);
          }
          index++;
        });

        /////////////////////////////

        const games = [
        {  
            "name":"Tannenberg",
            "picture":"tannenberg-logo.jpg",
            "url":"tannenberg",
            "releasedate":"16.11.2017 00:00:00",
            "background":null,
            "genres":"Action,Shooter",
            "developer":null,
            "publisher":"M2H, Blackmill Games"
        },
        {  
            "name":"Crackdown 3",
            "picture":"crackdown-3-logo.jpg",
            "url":"crackdown-3",
            "releasedate":"7.11.2017 00:00:00",
            "background":null,
            "genres":"Action,Adventure,Shooter",
            "developer":null,
            "publisher":"Microsoft Studios"
        },
        {  
            "name":"Call of Duty: WWII",
            "picture":"call-of-duty-WWII-logo.jpg",
            "url":"call-of-duty--wwii",
            "releasedate":"3.11.2017 00:00:00",
            "background":null,
            "genres":"Action,Online,Role Playing,Shooter",
            "developer":null,
            "publisher":"Activision\t"
        },
        {  
            "name":"Wolfenstein II: The New Colossus",
            "picture":"wolfenstein-2-logo.jpg",
            "url":"wolfenstein-ii--the-new-colossus",
            "releasedate":"27.10.2017 00:00:00",
            "background":null,
            "genres":"Action,Shooter",
            "developer":null,
            "publisher":"Bethesda Softworks\t"
        }
        ];

        games.forEach((game) => {
          let current = {
            "title": game.name,
            "href": "game/" + game.url,
            "src": "//cdn.kaldirirmi.com/images/games/" +  game.picture
          };
          this.push('gamelist', current);
        });
              
      }
      _handleNewsResponse(a){
        console.log("data", a.detail.response.length);
      }

    }

    window.customElements.define(KalHomePage.is, KalHomePage);
  </script>
</dom-module>
