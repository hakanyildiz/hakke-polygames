<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-request.html">

<link rel="import" href="shared-styles.html">

<dom-module id="kal-home-page">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
        height: 100vh;
        overflow-y: scroll !important;
        
        font-size: calc(0.6em + (1.3125 - 1) * ((100vw - 20em) / (80 - 20)));
        line-height: calc(1em + (1.8 - 1.4) * ((100vw - 20em) / (80 - 20)));

      }

    

      #home-page{
        @apply(--layout-horizontal);
      }

      .content-container{
        width:100%;
        @apply(--layout-horizontal);
      }

     

      .content-container .left-content{
        width: 66.66666666666666666666%;
        @apply(--layout-vertical);
      }
      .content-container .right-content{
        width: 33.33333333333333333333%;
        @apply(--layout-vertical);
      }

     

      .img-container{
        position: relative;
        opacity: .7;
        transition: all ease-in-out .2s;
      }
      .img-container:hover{
        opacity: 1;
      }


      figure{
        margin: 10px; 
        box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);
      }

      figcaption{
        margin-left: 10px;
        margin-bottom: 10px;
        color: #fff;
        padding-right: 20px;
      }
      
      iron-image{
        max-width: 100%;
        width: 100%;
        /* height: 12.5em; */
      }


      #items .item{
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
        /* padding: 20px; */
        background-color: white;
        border: 1px solid #ddd;
        cursor: pointer;
        margin-bottom: 10px;
        color: #000 !important;
      }
      .item .item-column{
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }
      .item iron-image{
        height: 106px;
        width: 190px;
        box-sizing: border-box;
        background-color: #DDD;
      }
      .item .pad{
        padding: 0 16px;
        -ms-flex: 1 1 .000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: .000000001px;
        flex-basis: .000000001px;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      }
      .item .primary{
        /* font-size: 16px; */
        font-weight: bold;
      }
      .item .shortText{
        /* font-size: 14px; */
      }
      .continue-item{
        padding-top: 5px;
        width: 100%;
      }
      .continue-item paper-button{
        width: inherit;
        font-size: 12px;
      }
      

      /* Desktops and laptops ----------- */
      @media only screen  and (min-width : 1224px) {
        .content-container .left-content figure .img-container iron-image{
          height: 21rem;
        }
        .content-container .right-content figure .img-container iron-image{
          height: 6.9rem;
        }

        .content-container .right-content figure figcaption{
          @apply(--layout-vertical);
          @apply(--layout-center-center);
          height: 50px;
          font-size: 14px;
          line-height: 20px;
        }

        #items .item{
          padding: 10px;
          line-height: 15px;
        }
        .item iron-image{
          width: 130px;
          height: 80px;
          box-sizing: border-box;
          background-color: #DDD;
        }

        .item .pad .primary{
          font-size: 12px;
        }
        .item .pad .shortText{
          font-size: 10px;
        }
      }
      
      /* Desktops and laptops ----------- */
      @media only screen  and (min-width : 1366px) {
        .content-container .left-content figure .img-container iron-image{
          height: 26rem;
        }
        .content-container .right-content figure .img-container iron-image{
          height: 11rem;
        }
      }

        /* Desktops and laptops ----------- */
        @media only screen  and (min-width : 1620px) {
        .content-container .left-content figure .img-container iron-image{
          height: 23rem;
        }
        .content-container .right-content figure .img-container iron-image{
          height: 8rem;
        }

        .item iron-image{
          width: 170px;
          height: 92px;
          box-sizing: border-box;
          background-color: #DDD;
        }
        .item .pad .primary{
          font-size: 16px;
        }
        .item .pad .shortText{
          font-size: 14px;
        }
      }

      /* Large screens ----------- */
      @media only screen  and (min-width : 1824px) {
        .content-container .left-content figure .img-container iron-image{
          height: 23rem;
        }
        .content-container .right-content figure .img-container iron-image{
          height: 8rem;
        }
      }

      .content-container{
        @apply(--layout-flex-8);
      }
      .other-container{
        @apply(--layout-flex-4);
      }
    </style>
<!-- 
    <iron-ajax
      id="ajax"
      url="http://localhost:8081/data.json"
      handle-as="json"
      on-response="_handleNewsResponse"
      loading="{{loading}}"
      debounce-duration="300"></iron-ajax> -->

    <div id="home-page">
        <paper-material elevation="4" class="content-container">
            <div class="left-content">
                <figure>
                  <a href="news/[[news.first.url]]">
                    <div class="img-container">
                        <iron-image src="[[cdn]][[news.first.picture]]" preload sizing="cover"></iron-image>
                    </div>
                  </a>
                  <figcaption>[[news.first.title]]</figcaption>
                </figure>
            </div>
            <div class="right-content">
                  <template is="dom-repeat" items={{news.center}} 
                    as=item>
                    <figure>
                      <a href="[[item.url]]">
                        <div class="img-container">
                            <iron-image src="[[cdn]][[item.picture]]" preload sizing="cover"></iron-image>
                          </div>
                      </a>             
                      <figcaption>[[item.title]]</figcaption>
                    </figure>
                  </template>
            </div>
        </paper-material>
        
        <paper-material elevation="1" class="other-container">
            <div id="items">
              <template is="dom-repeat" items={{news.right}} 
                as=item >
                <div class="item">
                    <div class="item-column">
                        <iron-image src="[[cdn]][[item.picture]]" preload sizing="cover"></iron-image>
                        <div class="pad">
                        <div class="primary">
                            [[item.title]]
                        </div>
                        <div class="shortText">
                            [[item.subtitle]]
                        </div>
                      </div>
                    </div>
                  </div>
              </template>
              </div>
              <div class="continue-item">
                <paper-button raised>Devamı</paper-button>
              </div>
        </paper-material>
    </div>

    <div style="height:1000px;"></div>

    
  </template>

  <script>
    class KalHomePage extends Polymer.Element {
      static get is() { return 'kal-home-page'; }

      /**
        * Object describing property-related metadata used by Polymer features
        */
      static get properties() {
        return {
          cdn : {
            type: String,
            value: 'https://cdn.kaldirirmi.com/images/news/',
          },
          loading: {
            type: Boolean,
            notify: true
          },
          content: {
            type: Array,
            value: [],
            notify: true
          },
          news: {
            type: Object,
            value: function(){
              return {
                first: null,
                center: [],
                right: []
              }
            }
          }
        };
      }


      /**
        * Called every time the element is inserted into the DOM. Useful for 
        * running setup code, such as fetching resources or rendering.
        * Generally, you should try to delay work until this time.
        */
      connectedCallback() {
        super.connectedCallback();
      
        const news = [
              {  
                  "id":1000094,
                  "title":"Yükselme Ligi 2017 Yaz Mevsimi Maçları Sona Erdi",
                  "url":"yukselme-ligi-2017-yaz-mevsimi-maclari-sona-erdi",
                  "picture":"yukselme-ligi-final.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":126,
                  "subtitle":"Sürpriz sonuçlar geldi, Galatasaray elindeki fırsatı değerlendiremedi.",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000093,
                  "title":"Playerunknown’s Battlegrounds’un Haftalık Güncellemesi Yayınlanacak",
                  "url":"playerunknown’s-battlegrounds’un-haftalik-guncellemesi-yayinlanacak",
                  "picture":"pubg-16-hafta-update.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":148,
                  "subtitle":"16.hafta güncellemesinde birçok sorun düzeltiliyor",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000092,
                  "title":"Steam’de Köklü Değişiklikler Bizi Bekliyor",
                  "url":"steam’de-koklu-degisiklikler-bizi-bekliyor",
                  "picture":"steam-logo.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":114,
                  "subtitle":"İşte değişiklikler…",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000091,
                  "title":"Playerunknown’s Battlegrounds’un Tam Sürümü Ertelendi",
                  "url":"playerunknown’s-battlegrounds’un-tam-surumu-ertelendi",
                  "picture":"pubg-haber.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":132,
                  "subtitle":"Tam sürüme 2017 yılının sonunda geçilmesi planlanıyor!",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000090,
                  "title":"Assassin’s Creed Origins ne kadar büyük olacak?",
                  "url":"assassin’s-creed-origins-ne-kadar-buyuk-olacak-",
                  "picture":"assassisns-creed-origins-haber.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":117,
                  "subtitle":"Yönetmeni Ashraf Ismail röportajında açıkladı",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              },
              {  
                  "id":1000089,
                  "title":"LOL Evinde",
                  "url":"lol-evinde",
                  "picture":"server-relocation-final-merged-fullsize.jpg",
                  "details":"",
                  "category":null,
                  "publisher":null,
                  "releasedate":null,
                  "viewcount":136,
                  "subtitle":"Şimdi Faker Düşünsün !",
                  "searchkeywords":null,
                  "publisheravatar":null,
                  "relatedgames":null
              }
        ];

        let index = 0;
        news.forEach(element => {
          if(index == 0){
            this.set('news.first', element);
          }
          else if(index >= 1 && index <= 2 ){
            this.push('news.center', element);
          }
          else{
            this.push('news.right', element);
          }
          index++;
        });
              
      }
      _handleNewsResponse(a){
        console.log("data", a.detail.response.length);
      }

    }

    window.customElements.define(KalHomePage.is, KalHomePage);
  </script>
</dom-module>
